let s=[],g=(u,l)=>{let n=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},l:l||0,lc:0,listen(i,o){return t.lc=n.push(i,o||t.l)/2,()=>{let e=n.indexOf(i);~e&&(n.splice(e,2),--t.lc||t.off())}},notify(i){let o=!s.length;for(let e=0;e<n.length;e+=2)s.push(n[e],n[e+1],t.value,i);if(o){for(let e=0;e<s.length;e+=4){let a;for(let f=e+1;!a&&(f+=4)<s.length;)s[f]<s[e+1]&&(a=s.push(s[e],s[e+1],s[e+2],s[e+3]));a||s[e](s[e+2],s[e+3])}s.length=0}},off(){},set(i){t.value!==i&&(t.value=i,t.notify())},subscribe(i,o){let e=t.listen(i,o);return i(t.value),e},value:u};return t},d=(u={})=>{let l=g(u);return l.setKey=function(n,t){typeof t>"u"?n in l.value&&(l.value={...l.value},delete l.value[n],l.notify(n)):l.value[n]!==t&&(l.value={...l.value,[n]:t},l.notify(n))},l};const m=g(!1),r=d({}),p=g(0),v=g(0);function b({id:u,name:l,imageSrc:n,price:t,selectedAttributes:i},o=1){const e=l+" - "+h(i),a=r.get()[e];p.set(p.get()+o),v.set(v.get()+t*o);const f=i.map(c=>({...c}));if(a){const c={...a,quantity:a.quantity+o,selectedAttributes:f};r.setKey(e,c),console.log(r.get())}else{const c={id:u,name:l,imageSrc:n,price:t,quantity:o,selectedAttributes:f};r.setKey(e,c)}}function h(u){let l="";return u.forEach((n,t)=>{l+=n.viewValue+": "+n.optionSelected,t<u.length-1&&(l+=" | ")}),l}export{b as a,r as c,m as i,v as s,p as t};
